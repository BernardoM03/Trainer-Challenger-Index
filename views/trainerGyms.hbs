<!--
    Project: Trainer Challenger Index
    Authors: Bernardo Mendes and Gage Davelaar
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,  initial-scale=1.0">
  <title>TrainerGyms</title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.cdnfonts.com/css/pokemon-solid" rel="stylesheet">
</head>

<body>
  <header class="header-bar">
    <h1 class="header-title">Trainer Challenger Index - Badges</h1>
    <nav class="header-nav">
        <a href="/trainers" class="header-link">Trainers</a>
        <a href="/pokemon" class="header-link">Pokemon</a>
        <a href="/gyms" class="header-link">Gyms</a>
        <a href="/regions" class="header-link">Regions</a>
        <a href="/trainerGyms" class="header-link">TrainerGyms</a>
    </nav>
  </header>
  <main>
    <p class="entity-header"><strong>Browse Trainer Gym Badge Records</strong></p>
    <table class="entity-table" id="trainergyms-table" border="1" cellpadding="5">
      <thead>
        <tr>
          <th>Trainer ID</th>
          <th>Gym ID</th>
          <th>Trainer Name</th>
          <th>Badge Name</th>
          <th>Date Earned</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{!-- For each row, print the id, name, age, region_id, in order --}}
        {{#each data}}
        <tr>
          <td>{{this.trainer_id}}</td>
          <td>{{this.gym_id}}</td>
          <td>{{this.trainer_name}}</td>
          <td>{{this.badge_name}}</td>
          <td>{{formatDate this.date_earned}}</td>
          <td><a href="/delete_trainerGym/{{this.trainer_id}}/{{this.gym_id}}" class="table_button">Delete</a></td>
        </tr>
        {{/each}}
      </tbody>
    </table>

    <div class="addUpdateButtons">
      <button type="button" onclick="openUpdateModal()">Update a Trainer Gym</button>
      <button type="button" onclick="openAddModal()">Add New Trainer Gym</button>
    </div>

    <div id="update-trainergym-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close" onclick="closeUpdateModal()">&times;</span>
        <h2>Update Badge</h2>
        <form id="update-trainergym-form">
          <label for="choose-trainergym">TrainerGym: </label>
          <select name="choose-trainergym" id="mySelectTrainergym">
            <option value="test">Select a TrainerGym</option>
            {{#each data}}
            <option value="{{this.trainer_id}}-{{this.gym_id}}">
              {{this.trainer_name}} - {{this.badge_name}}
            </option>
            {{/each}}
          </select><br><br>

          <label for="update-trainergym-badgename">Badge Name:</label>
          <input type="text" id="update-trainergym-badgename" required><br><br>

          <label for="update-trainergym-gym">Gym:</label>
          <select name="choose-gym-name" id="update-trainergym-gym">
            <option value="test">Select a Gym</option>
            {{#each gyms}}
            <option value="{{this.gym_id}}">{{this.name}}</option>
            {{/each}}
          </select><br><br>

          <label for="update-trainergym-trainer">Trainer:</label>
          <select name="update-trainergym-trainer" id="update-trainergym-trainer">
            <option value="">Select a Trainer</option>
            {{#each trainers}}
            <option value="{{this.trainer_id}}">{{this.name}}</option>
            {{/each}}
          </select><br><br>

          <label for="update-trainergym-date">Date Earned:</label>
          <input type="date" id="update-trainergym-date" required><br><br>

          <input type="submit" onclick="closeUpdateModal()">
        </form>
      </div>
    </div>

    <div id="add-trainergym-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close" onclick="closeAddModal()">&times;</span>
        <h2>Add Gym</h2>
        <form id="add-trainergym-form">
          <label for="trainergym-name">Badge Name:</label>
          <input type="text" id="trainergym-name" required><br><br>

          <label for="trainergym-gym">Gym:</label>
          <select name="choose-gym-name" id="trainergym-gym">
            <option value="test">Select a Gym</option>
            {{#each gyms}}
            <option value="{{this.gym_id}}">{{this.name}}</option>
            {{/each}}
          </select><br><br>

          <label for="trainergym-trainer">Trainer:</label>
          <select name="input-trainer" id="trainergym-trainer">
            <option value="">Select a Trainer</option>
            {{#each trainers}}
            <option value="{{this.trainer_id}}">{{this.name}}</option>
            {{/each}}
          </select><br><br>

          <label for="trainergym-date">Date Earned:</label>
          <input type="date" id="trainergym-date" required><br><br>

          <input type="submit" onclick="closeAddModal()">
        </form>
      </div>
    </div>



  </main>
  <!-- To link external javascript file -->
  <script src="/js/trainergymfuncs.js"></script>
  <script src="/js/add_trainergyms.js"></script>
  <script src="/js/update_trainergyms.js"></script>

  <footer>
    <p>&copy; 2025 Trainer Challenge Index. All rights reserved.</p>
  </footer>

</body>

</html>